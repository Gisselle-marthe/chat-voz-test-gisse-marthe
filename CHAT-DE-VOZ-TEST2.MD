# Explicaci√≥n de dise√±o y UX ‚Äì MiniChat de Voz en Tiempo Real

Este m√≥dulo fue dise√±ado desde cero para cumplir con los objetivos de la **Prueba T√©cnica 2: MiniChat de Voz en Tiempo Real**, priorizando la **claridad en la interfaz**, la **facilidad de uso** y la **integraci√≥n natural de funciones de audio**.

---

## Decisiones clave de dise√±o

### 1. Simplicidad en el acceso

- **Pantalla de login minimalista**: ingreso r√°pido con nickname, sin fricciones ni elementos innecesarios.
- Nickname visible dentro del chat para reforzar identidad y contexto.

### 2. Jerarqu√≠a visual clara en el chat

- **Mensajes diferenciados**:  
  - Mensajes de sistema con burbuja gris e √≠cono identificador.  
  - Mensajes de usuario con avatar, nombre y hora de env√≠o.  
- Orden cronol√≥gico natural con timestamps visibles.

### 3. Interacciones optimizadas para audio

- Bot√≥n de grabaci√≥n flotante, siempre accesible y con **feedback visual de estado** (activo/inactivo).
- L√≠mite de grabaci√≥n de 30 segundos, con validaci√≥n para evitar audios vac√≠os o silencios prolongados.
- Controles de reproducci√≥n simples: play/pause, aceleraci√≥n (1x, 1.5x, 2x) y visualizaci√≥n de duraci√≥n.

### 4. Enfoque en la limpieza visual

- Eliminaci√≥n de ruido visual para centrar la atenci√≥n en el contenido del audio.
- Espaciado generoso entre mensajes para mejorar legibilidad y escaneabilidad.

### 5. Consistencia y escalabilidad

- Paleta crom√°tica y tipograf√≠a coherentes con el resto del producto.
- Componentes modulares, reutilizables y f√°cilmente integrables en otras vistas (por ejemplo, el dashboard de la Prueba T√©cnica 1).

---

## Implementaci√≥n Funcional del Frontend

### üèóÔ∏è Arquitectura de Componentes

La aplicaci√≥n est√° estructurada de manera modular y escalable, siguiendo las mejores pr√°cticas de Vue 3. El sistema de chat se organiza en componentes especializados que se comunican entre s√≠ de forma eficiente.

La vista principal del chat coordina todos los elementos: la barra de acciones para grabar y enviar mensajes, el header que muestra la informaci√≥n del usuario, el contenedor de mensajes que gestiona la lista din√°mica, y las burbujas individuales que representan cada mensaje de voz.

Los componentes reutilizables incluyen el visualizador de ondas de audio, la navegaci√≥n lateral, y la barra de b√∫squeda. Cada uno est√° dise√±ado para ser independiente y reutilizable en otras partes de la aplicaci√≥n.

### üé§ Sistema de Grabaci√≥n de Audio

El sistema de grabaci√≥n utiliza la API MediaRecorder del navegador para capturar audio del micr√≥fono del usuario. Cuando el usuario presiona el bot√≥n de grabaci√≥n, la aplicaci√≥n solicita permisos de micr√≥fono y comienza a grabar en formato WebM con codec Opus, que proporciona una excelente calidad de audio con archivos compactos.

La grabaci√≥n se limita a 30 segundos para mantener la experiencia del chat fluida y evitar mensajes demasiado largos. Durante la grabaci√≥n, se muestra un timer visual que indica cu√°nto tiempo ha pasado y cu√°nto queda disponible.

Una caracter√≠stica importante es la validaci√≥n autom√°tica del audio. Utilizando la Web Audio API, el sistema analiza la frecuencia del audio grabado para detectar si contiene sonido real o si es solo silencio. Esto previene el env√≠o de mensajes vac√≠os y mejora la calidad de la comunicaci√≥n.

### üéµ Sistema de Reproducci√≥n con WaveSurfer.js

Para la visualizaci√≥n y reproducci√≥n de audio, se implement√≥ WaveSurfer.js, una librer√≠a especializada en la representaci√≥n visual de ondas de audio. Cada mensaje de voz se muestra con una representaci√≥n gr√°fica de su contenido sonoro, permitiendo a los usuarios identificar visualmente la intensidad y duraci√≥n del audio antes de reproducirlo.

Los controles de reproducci√≥n incluyen botones de play/pause, una barra de progreso que muestra la posici√≥n actual en el audio, y un selector de velocidad que permite reproducir el audio a 1x, 1.5x o 2x la velocidad normal. Esta funcionalidad es especialmente √∫til para mensajes largos o cuando se necesita revisar informaci√≥n r√°pidamente.

El sistema tambi√©n incluye control de volumen y la capacidad de saltar a diferentes partes del audio haciendo clic en la visualizaci√≥n de la onda. La duraci√≥n total del audio se muestra en formato legible (minutos:segundos) para que los usuarios sepan cu√°nto tiempo durar√° la reproducci√≥n.

### üí¨ Sistema de Chat en Tiempo Real

La comunicaci√≥n en tiempo real se implementa utilizando la API BroadcastChannel, que permite que diferentes pesta√±as del navegador se comuniquen entre s√≠. Esto simula un sistema de chat real sin necesidad de un backend, ya que los mensajes se transmiten instant√°neamente entre todas las instancias abiertas de la aplicaci√≥n.

Cuando un usuario graba y env√≠a un mensaje de voz, este se procesa, se valida, y se env√≠a a trav√©s del canal de comunicaci√≥n. Todos los usuarios conectados reciben el mensaje inmediatamente, y la interfaz se actualiza en tiempo real para mostrar el nuevo mensaje en la lista.

El sistema de mensajes incluye metadatos como el ID √∫nico del mensaje, el usuario que lo envi√≥, la duraci√≥n del audio, el timestamp de env√≠o, y los datos de la onda para la visualizaci√≥n. Los mensajes se ordenan cronol√≥gicamente, con los m√°s recientes en la parte superior.

### üîê Sistema de Autenticaci√≥n

La autenticaci√≥n se implementa de manera simple pero efectiva. Los usuarios solo necesitan proporcionar un nickname para acceder al chat, sin necesidad de contrase√±as o registros complejos. El sistema genera un ID √∫nico para cada usuario.

La informaci√≥n del usuario se almacena en el localStorage del navegador, permitiendo que la sesi√≥n persista entre recargas de p√°gina. El estado de autenticaci√≥n se gestiona globalmente usando Pinia, un store de estado moderno para Vue 3.

La protecci√≥n de rutas se implementa mediante guards de navegaci√≥n que verifican si el usuario est√° autenticado antes de permitir el acceso a p√°ginas protegidas. Si un usuario no autenticado intenta acceder al chat, es redirigido autom√°ticamente a la p√°gina de login.

### üé® Sistema de UI/UX con Vuetify

La interfaz de usuario se construye utilizando Vuetify 3. Los componentes se personalizan para adaptarse a las necesidades espec√≠ficas del chat de voz, manteniendo la coherencia visual en toda la aplicaci√≥n.

Los componentes de audio incluyen indicadores visuales claros del estado actual: colores diferentes para grabaci√≥n activa, procesamiento, y estados de error. Los botones cambian de apariencia seg√∫n el contexto, proporcionando feedback inmediato al usuario sobre qu√© acciones est√°n disponibles.

### üì± Gesti√≥n de Estados y Reactividad

Vue 3 con Composition API proporciona un sistema de reactividad robusto que mantiene la interfaz sincronizada con el estado de la aplicaci√≥n. Cada funcionalidad de audio tiene estados bien definidos: inactivo, grabando, procesando, reproduciendo, y error.

Los estados se reflejan visualmente en la interfaz, con cambios de color, iconos, y comportamientos que gu√≠an al usuario a trav√©s de cada proceso. Por ejemplo, durante la grabaci√≥n, el bot√≥n principal cambia de azul a rojo, y se muestra un indicador de progreso que se llena gradualmente hasta alcanzar el l√≠mite de 30 segundos.

La reactividad tambi√©n se utiliza para sincronizar la reproducci√≥n de audio con la visualizaci√≥n de ondas. Cuando se reproduce un mensaje, la barra de progreso se actualiza en tiempo real, y la posici√≥n actual se refleja visualmente en la representaci√≥n de la onda.

### üîÑ Persistencia y Sincronizaci√≥n

Los mensajes del chat se almacenan en el localStorage del navegador, permitiendo que la conversaci√≥n persista entre sesiones. Cuando un usuario regresa a la aplicaci√≥n, todos los mensajes anteriores se cargan autom√°ticamente, manteniendo el contexto de la conversaci√≥n.

Las preferencias del usuario, como la velocidad de reproducci√≥n preferida, tambi√©n se guardan localmente. Esto personaliza la experiencia para cada usuario, recordando sus configuraciones entre sesiones.

La sincronizaci√≥n en tiempo real se logra mediante el sistema de BroadcastChannel, que mantiene todas las instancias de la aplicaci√≥n sincronizadas. Si un usuario abre m√∫ltiples pesta√±as, ver√° los mismos mensajes en todas ellas, y los cambios se reflejan instant√°neamente.

---

## Resultado

Un MiniChat de Voz que:

1. **Ofrece una experiencia intuitiva y fluida** para grabar, enviar y reproducir mensajes de voz.  
2. **Presenta los mensajes con claridad** y distinci√≥n entre tipos de remitente.  
3. **Integra de forma natural funciones avanzadas** como validaci√≥n de audio y control de velocidad de reproducci√≥n.  
4. **Mantiene una base de dise√±o modular** para su reutilizaci√≥n y extensi√≥n en otros contextos.
5. **Implementa tecnolog√≠as modernas** como Web Audio API, MediaRecorder, WaveSurfer.js y BroadcastChannel.
6. **Utiliza arquitectura Vue 3** con Composition API, Pinia para estado y Vuetify para UI.
7. **Proporciona feedback visual completo** en todas las interacciones de audio.



